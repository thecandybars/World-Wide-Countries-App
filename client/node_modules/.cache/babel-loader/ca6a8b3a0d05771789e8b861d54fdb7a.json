{"ast":null,"code":"var _jsxFileName = \"/Users/andres/Documents/Henry/bootcamp/PI-Countries-main/client/src/components/SelectCountries.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getActivitiesList, getCountries } from '../actions';\nimport styles from './SelectCountries.module.css';\nimport searchIco from \"../icons/manage_search_white_24dp.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SelectCountries(_ref) {\n  _s();\n\n  let {\n    countriesActivity\n  } = _ref;\n  const countries = useSelector(state => state.countries, () => {});\n  const [selectedCountries, setSelectedCountries] = useState([]); // Para que no aparezcan regiones vacias en el listado cuando filtro paises\n  // regionList debe ser una array de objetos { region='', hasCountrySelected=false }\n  // y setear cada vez que selectedCountries cambie.\n  // Usar esa propiedad para decidir si se muestra o no el titulo de la region\n\n  const [regionList, setRegionList] = useState([]); // const [regionList, setRegionList] = useState([]);\n\n  /* INITIALIZATION */\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getCountries());\n    dispatch(getActivitiesList());\n  }, [dispatch]);\n  /* INIT AFTER LOADING : FILL SELECTED COUNTRIES */\n\n  useEffect(() => {\n    //// FILL REGION LIST\n    setRegionList(countries.map(obj => obj.region) // convierte el obj en arr\n    .filter((item, index, arr) => arr.indexOf(item) === index)) // filtra repeticiones);\n    .map(reg => ({\n      region: reg,\n      hasCountrySelected: false\n    })); //// FILL SELECTED COUNTRIES\n\n    const arr = countries.map(c => ({\n      id: c.id,\n      name: c.name,\n      region: c.region,\n      flag_icon: c.flag_icon,\n      selected: false\n    }));\n    arr.sort(function (a, b) {\n      const A = a.name.toUpperCase();\n      const B = b.name.toUpperCase();\n      if (A < B) return -1;\n      if (A > B) return 1;\n      return 0;\n    });\n    setSelectedCountries(arr);\n  }, [countries]);\n  useEffect(() => {\n    console.log(\"ðŸš€ ~ file: SelectCountries.jsx ~ line 56 ~ SelectCountries ~ regionList\", regionList);\n  }, [regionList]); // SELECTED COUNTRIES\n\n  function liClickHandler(e) {\n    // Puede hacerse mas elegante con map? Sin sacar una copia de selectedCountries?\n    const selectedCountriesCopy = [...selectedCountries];\n    selectedCountriesCopy.forEach(c => c.id === e.target.id && (c.selected = !c.selected));\n    setSelectedCountries(selectedCountriesCopy);\n    countriesActivity(selectedCountriesCopy);\n  } // SEARCH\n\n\n  const inputSearch = useRef();\n  const [searchText, setSearchText] = useState();\n  const [showSelected, setShowSelected] = useState(false);\n\n  function handleResetButton(e) {\n    e.preventDefault();\n    setSearchText('');\n    inputSearch.current.value = '';\n  }\n\n  function handleSearchText(e) {\n    setSearchText(e.target.value);\n  }\n\n  function showSelectedHandler(e) {\n    setShowSelected(e.target.checked);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.search,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: searchIco,\n        alt: \"search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Search \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"searchText\",\n        name: \"searchText\",\n        onChange: handleSearchText,\n        ref: inputSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: styles.button,\n        type: \"button\",\n        onClick: handleResetButton,\n        value: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        onChange: showSelectedHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Show selected\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: styles.countriesList,\n      children: selectedCountries && regionList.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n        id: styles.region,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: r.region\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: styles.countries,\n          children: selectedCountries.map(c => c.region === r.region && (searchText ? c.name.toUpperCase().includes(searchText.toUpperCase()) : true) && (showSelected ? c.selected : true) && /*#__PURE__*/_jsxDEV(\"li\", {\n            id: c.id,\n            onClick: liClickHandler,\n            className: c.selected ? styles.countrySelected : styles.countryUnselected,\n            children: [c.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '1.5em'\n              },\n              children: c.flag_icon !== 'N/A' && ' ' + c.flag_icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 41\n            }, this)]\n          }, c.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 38\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }, this)]\n      }, r.region, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SelectCountries, \"1nuouxzWXqsDIbuMsIQs/qqTu0M=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = SelectCountries;\n\nvar _c;\n\n$RefreshReg$(_c, \"SelectCountries\");","map":{"version":3,"sources":["/Users/andres/Documents/Henry/bootcamp/PI-Countries-main/client/src/components/SelectCountries.jsx"],"names":["React","useRef","useState","useEffect","useSelector","useDispatch","getActivitiesList","getCountries","styles","SelectCountries","countriesActivity","countries","state","selectedCountries","setSelectedCountries","regionList","setRegionList","dispatch","map","obj","region","filter","item","index","arr","indexOf","reg","hasCountrySelected","c","id","name","flag_icon","selected","sort","a","b","A","toUpperCase","B","console","log","liClickHandler","e","selectedCountriesCopy","forEach","target","inputSearch","searchText","setSearchText","showSelected","setShowSelected","handleResetButton","preventDefault","current","value","handleSearchText","showSelectedHandler","checked","container","search","searchIco","button","countriesList","r","includes","countrySelected","countryUnselected","fontSize"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react'\nimport { useState, useEffect, } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getActivitiesList, getCountries } from '../actions'\nimport styles from './SelectCountries.module.css';\nimport searchIco from '../icons/manage_search_white_24dp.svg'\n\nexport default function SelectCountries({ countriesActivity }) {\n\n    const countries = useSelector(state => state.countries, () => { });\n\n    const [selectedCountries, setSelectedCountries] = useState([]);\n    // Para que no aparezcan regiones vacias en el listado cuando filtro paises\n    // regionList debe ser una array de objetos { region='', hasCountrySelected=false }\n    // y setear cada vez que selectedCountries cambie.\n    // Usar esa propiedad para decidir si se muestra o no el titulo de la region\n    const [regionList, setRegionList] = useState([]);\n    // const [regionList, setRegionList] = useState([]);\n\n    /* INITIALIZATION */\n    const dispatch = useDispatch()\n    useEffect(() => {\n        dispatch(getCountries());\n        dispatch(getActivitiesList());\n    }, [dispatch])\n    /* INIT AFTER LOADING : FILL SELECTED COUNTRIES */\n    useEffect(() => {\n        //// FILL REGION LIST\n        setRegionList(countries\n            .map((obj) => obj.region) // convierte el obj en arr\n            .filter((item, index, arr) => arr.indexOf(item) === index)) // filtra repeticiones);\n            .map(reg => ({region:reg, hasCountrySelected: false}));\n        //// FILL SELECTED COUNTRIES\n        const arr = countries.map((c) => (\n            {\n                id: c.id,\n                name: c.name,\n                region: c.region,\n                flag_icon: c.flag_icon,\n                selected: false\n            }\n        ))\n        arr.sort(function (a, b) {\n            const A = a.name.toUpperCase();\n            const B = b.name.toUpperCase();\n            if (A < B) return -1;\n            if (A > B) return 1;\n            return 0;\n        });\n        setSelectedCountries(arr);\n    }, [countries]);\n\n    useEffect(()=> {\n        console.log(\"ðŸš€ ~ file: SelectCountries.jsx ~ line 56 ~ SelectCountries ~ regionList\", regionList);\n    },[regionList])\n\n    // SELECTED COUNTRIES\n    function liClickHandler(e) {\n        // Puede hacerse mas elegante con map? Sin sacar una copia de selectedCountries?\n        const selectedCountriesCopy = [...selectedCountries];\n        selectedCountriesCopy.forEach(c => c.id === e.target.id && (c.selected = !c.selected))\n        setSelectedCountries(selectedCountriesCopy);\n        countriesActivity(selectedCountriesCopy);\n    }\n\n    // SEARCH\n    const inputSearch = useRef();\n    const [searchText, setSearchText] = useState();\n    const [showSelected, setShowSelected] = useState(false);\n\n    function handleResetButton(e) {\n        e.preventDefault();\n        setSearchText('');\n        inputSearch.current.value = '';\n    }\n    function handleSearchText(e) {\n        setSearchText(e.target.value);\n    }\n    function showSelectedHandler(e) {\n        setShowSelected(e.target.checked);\n    }\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.search}>\n                <img src={searchIco} alt='search' />\n                <label>Search </label>\n                <input type=\"text\" id=\"searchText\" name=\"searchText\" onChange={handleSearchText} ref={inputSearch} />\n                <input className={styles.button} type=\"button\" onClick={handleResetButton} value=\"X\" />\n                <br />\n                <input type='checkbox' onChange={showSelectedHandler} />\n                <label>Show selected</label>\n            </div>\n            {/* COUNTRY LIST */}\n            <ul className={styles.countriesList}>\n                {\n                    selectedCountries &&\n                    regionList.map(r =>\n                        <div key={r.region} id={styles.region}>\n                            <h2>{r.region}</h2>\n                            <div id={styles.countries}>\n                                {selectedCountries.map(c =>\n                                    (c.region === r.region\n                                        && (searchText\n                                            ? c.name.toUpperCase().includes(searchText.toUpperCase())\n                                            : true)\n                                        && (showSelected ? c.selected : true)\n                                    ) &&\n                                    (<li key={c.id} id={c.id} onClick={liClickHandler}\n                                        className={c.selected ? styles.countrySelected : styles.countryUnselected}\n                                    >\n                                        {c.name}\n                                        <span style={{ fontSize: '1.5em' }}>\n                                            {c.flag_icon !== 'N/A' && ' ' + c.flag_icon}\n                                        </span>\n                                    </li>)\n                                )}\n                            </div>\n                        </div>\n                    )\n                }\n            </ul>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}