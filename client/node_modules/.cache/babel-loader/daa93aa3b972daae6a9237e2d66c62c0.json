{"ast":null,"code":"var _jsxFileName = \"/Users/andres/Documents/Henry/bootcamp/PI-Countries-main/client/src/components/Home.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getCountries, getActivitiesList, countriesTools } from \"../actions\";\nimport CountryCard from \"./CountryCard.jsx\";\nimport Paging from \"./Paging\";\nimport style from \"./Home.module.css\";\nimport \"./Global.css\";\nimport reloadIco from \"../icons/refresh_white_24dp.svg\";\nimport sortAzIco from \"../icons/sort_by_alpha_white_24dp.svg\";\nimport sortZaIco from \"../icons/sort_by_omega_white_24dp.svg\";\nimport sortPersonUpIco from \"../icons/person_add_white_24dp.svg\";\nimport sortPersonDwIco from \"../icons/person_remove_white_24dp.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n\n  // ACTIONS\n  const dispatch = useDispatch(); // LOCAL STATES\n\n  const [filter, setFilter] = useState({\n    region: \"\",\n    activity: \"\"\n  });\n  const [order, setOrder] = useState('');\n  const [searchText, setSearchText] = useState('');\n  const [allCountries, setAllCountries] = useState([]);\n  const [regionList, setRegionList] = useState([]); // GLOBAL STATE\n\n  const countries = useSelector(state => state.countries, () => {});\n  const activitiesList = useSelector(state => state.activitiesList); // Seria interesante hacer orderList dinámica\n  // const orderList = ['none', 'asc', 'des', 'popUp', 'popDown'];\n  // https://www.geeksforgeeks.org/how-to-set-default-value-in-select-using-reactjs/\n  /////// INITIALIZATION\n\n  useEffect(() => {\n    dispatch(getCountries());\n    dispatch(getActivitiesList());\n  }, [dispatch]); // un warning me obliga a poner dispatch acá. Porqué? Sobre todo no entiendo porqué funciona!\n  // Cuando countries esta cargado:\n\n  useEffect(() => {\n    if (true) {\n      //allCountries.length === 0\n      setAllCountries([...countries]);\n      setRegionList(countries.map(obj => obj.region) // convierte el obj en arr\n      .filter((item, index, arr) => arr.indexOf(item) === index)); // filtra repeticiones);\n\n      pages(1); // Go to page 1\n    }\n  }, [countries, allCountries.length]); // Re-inicialización forzada con botón\n\n  function handleReloadDB(e) {\n    e.preventDefault();\n    setAllCountries([]);\n    dispatch(getCountries());\n    dispatch(getActivitiesList());\n  } ///// PAGING\n\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [countriesXPage, setCountriesXPage] = useState(9);\n  const [totalPages, setTotalPages] = useState(0);\n  const lastCountry = currentPage * countriesXPage;\n  const firstCountry = lastCountry - countriesXPage;\n  const pageCountries = countries.slice(firstCountry, lastCountry);\n\n  const pages = page => {\n    //////// Solo usar para ese requisito extraño del PI !!!\n    if (page === 1) setCountriesXPage(9);else setCountriesXPage(10);\n    setCurrentPage(page);\n  };\n\n  useEffect(() => {\n    if (countries) {\n      const calcTotalPages = Math.ceil(countries.length / countriesXPage);\n      setTotalPages(calcTotalPages);\n      if (currentPage > calcTotalPages) setCurrentPage(1);\n    }\n  }, [countries, countriesXPage, currentPage]); /////////////// COUNTRIES TOOLS : FILTER, SEARCH && ORDER : se podria modularizar !!!!!!\n\n  useEffect(() => {\n    dispatch(countriesTools(filter, searchText, order, allCountries));\n    pages(currentPage);\n  }, [order, filter, searchText, dispatch, currentPage]); // Si agrego allCountries entra en loop\n  // FILTER\n\n  const regionFilter = useRef();\n  const activityFilter = useRef();\n\n  function handleFilter(e) {\n    // Es un obj tipo { region:'Asia', activity:'Morder' }\n    setFilter({ ...filter,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  function handleClearFilters() {\n    setFilter({});\n    regionFilter.current.value = '';\n    activityFilter.current.value = '';\n  } // SEARCH\n\n\n  const inputSearch = useRef();\n\n  function handleResetButton(e) {\n    e.preventDefault();\n    setSearchText('');\n    inputSearch.current.value = '';\n  }\n\n  function handleSearchText(e) {\n    setSearchText(e.target.value);\n  } // ORDER\n\n\n  function handleOrder(e) {\n    setOrder(e.target.id);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: style.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.countryTools,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.settings,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: style.reload,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Reload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: reloadIco,\n            value: \"Reload\",\n            onClick: handleReloadDB,\n            alt: \"reload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 90\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: style.results,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Page results \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: countriesXPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"8\",\n            max: \"32\",\n            size: \"2\",\n            value: countriesXPage,\n            onChange: e => setCountriesXPage(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Total results \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: countries.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Paging, {\n        totalPages: totalPages,\n        currentPage: currentPage,\n        pages: pages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.tools,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: style.sort,\n          className: style.tool,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Sort\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: sortAzIco,\n              id: \"asc\",\n              name: \"order\",\n              value: \"ASC\",\n              onClick: handleOrder,\n              className: order === 'asc' ? style.imgSelected : null,\n              alt: \"Order:ascending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: sortZaIco,\n              id: \"des\",\n              name: \"order\",\n              value: \"DES\",\n              onClick: handleOrder,\n              className: order === 'des' ? style.imgSelected : null,\n              alt: \"Order:descending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: sortPersonUpIco,\n              id: \"popUp\",\n              name: \"order\",\n              value: \"PopUp\",\n              onClick: handleOrder,\n              className: order === 'popUp' ? style.imgSelected : null,\n              alt: \"Order:popoulation up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: sortPersonDwIco,\n              id: \"popDown\",\n              name: \"order\",\n              value: \"PopDown\",\n              onClick: handleOrder,\n              className: order === 'popDown' ? style.imgSelected : null,\n              alt: \"Order:popoulation down\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: style.search,\n          className: style.tool,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              size: \"15\",\n              id: \"searchText\",\n              name: \"searchText\",\n              onChange: handleSearchText,\n              ref: inputSearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"button\",\n              onClick: handleResetButton,\n              value: \"X\",\n              className: style.button,\n              style: searchText ? {\n                visibility: 'visible'\n              } : {\n                visibility: 'hidden'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.tool,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Filter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: style.filter,\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"region\",\n              onChange: handleFilter,\n              ref: regionFilter,\n              defaultValue: \"By region\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                disabled: true,\n                children: \"By region\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"All regions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this), regionList && regionList.map(reg => {\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: reg,\n                  children: reg\n                }, reg, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 29\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"activity\",\n              onChange: handleFilter,\n              ref: activityFilter,\n              defaultValue: \"By activity\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                disabled: true,\n                children: \"By activity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"All activities\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 17\n              }, this), activitiesList && activitiesList.map(act => {\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: act,\n                  children: act\n                }, act, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 29\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"button\",\n              onClick: handleClearFilters,\n              value: \"X\",\n              className: style.button,\n              style: filter.region || filter.activity ? {\n                visibility: 'visible'\n              } : {\n                visibility: 'hidden'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: style.countries,\n      children: countries.length ? pageCountries.map(country => {\n        return /*#__PURE__*/_jsxDEV(CountryCard, {\n          name: country.name,\n          region: country.region,\n          flag: country.flag,\n          flag_icon: country.flag_icon,\n          id: country.id\n        }, country.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 15\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.loader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"uXejcjlwpQbrxYB3/Y4UzA+wxW0=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/andres/Documents/Henry/bootcamp/PI-Countries-main/client/src/components/Home.jsx"],"names":["React","useState","useEffect","useRef","useDispatch","useSelector","getCountries","getActivitiesList","countriesTools","CountryCard","Paging","style","Home","dispatch","filter","setFilter","region","activity","order","setOrder","searchText","setSearchText","allCountries","setAllCountries","regionList","setRegionList","countries","state","activitiesList","map","obj","item","index","arr","indexOf","pages","length","handleReloadDB","e","preventDefault","currentPage","setCurrentPage","countriesXPage","setCountriesXPage","totalPages","setTotalPages","lastCountry","firstCountry","pageCountries","slice","page","calcTotalPages","Math","ceil","regionFilter","activityFilter","handleFilter","target","name","value","handleClearFilters","current","inputSearch","handleResetButton","handleSearchText","handleOrder","id","container","countryTools","settings","reload","reloadIco","results","tools","sort","tool","sortAzIco","imgSelected","sortZaIco","sortPersonUpIco","sortPersonDwIco","search","button","visibility","reg","act","country","flag","flag_icon","loader"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getCountries, getActivitiesList, countriesTools } from \"../actions\";\nimport CountryCard from \"./CountryCard.jsx\";\nimport Paging from \"./Paging\";\nimport style from \"./Home.module.css\";\nimport \"./Global.css\";\n\nimport reloadIco from '../icons/refresh_white_24dp.svg'\nimport sortAzIco from '../icons/sort_by_alpha_white_24dp.svg'\nimport sortZaIco from '../icons/sort_by_omega_white_24dp.svg'\nimport sortPersonUpIco from '../icons/person_add_white_24dp.svg'\nimport sortPersonDwIco from '../icons/person_remove_white_24dp.svg'\n\n\nexport default function Home() {\n  // ACTIONS\n  const dispatch = useDispatch();\n  // LOCAL STATES\n  const [filter, setFilter] = useState({ region: \"\", activity: \"\" });\n  const [order, setOrder] = useState('');\n  const [searchText, setSearchText] = useState('');\n  const [allCountries, setAllCountries] = useState([]);\n  const [regionList, setRegionList] = useState([]);\n  // GLOBAL STATE\n  const countries = useSelector((state) => state.countries, () => { });\n  const activitiesList = useSelector((state) => state.activitiesList);\n\n  // Seria interesante hacer orderList dinámica\n  // const orderList = ['none', 'asc', 'des', 'popUp', 'popDown'];\n  // https://www.geeksforgeeks.org/how-to-set-default-value-in-select-using-reactjs/\n\n  /////// INITIALIZATION\n  useEffect(() => {\n    dispatch(getCountries());\n    dispatch(getActivitiesList());\n  }, [dispatch]) // un warning me obliga a poner dispatch acá. Porqué? Sobre todo no entiendo porqué funciona!\n\n  // Cuando countries esta cargado:\n  useEffect(() => {\n    if (true) { //allCountries.length === 0\n      setAllCountries([...countries]);\n      setRegionList(countries\n        .map((obj) => obj.region) // convierte el obj en arr\n        .filter((item, index, arr) => arr.indexOf(item) === index)); // filtra repeticiones);\n      pages(1); // Go to page 1\n    }\n  }, [countries, allCountries.length])\n\n  // Re-inicialización forzada con botón\n  function handleReloadDB(e) {\n    e.preventDefault();\n    setAllCountries([]);\n    dispatch(getCountries());\n    dispatch(getActivitiesList());\n  }\n\n  ///// PAGING\n  const [currentPage, setCurrentPage] = useState(1);\n  const [countriesXPage, setCountriesXPage] = useState(9);\n  const [totalPages, setTotalPages] = useState(0);\n  const lastCountry = currentPage * countriesXPage;\n  const firstCountry = lastCountry - countriesXPage;\n  const pageCountries = countries.slice(firstCountry, lastCountry);\n\n  const pages = (page) => {\n    //////// Solo usar para ese requisito extraño del PI !!!\n    if (page === 1) setCountriesXPage(9);\n    else setCountriesXPage(10);\n    setCurrentPage(page);\n  };\n  useEffect(() => {\n    if (countries) {\n      const calcTotalPages = Math.ceil(countries.length / countriesXPage)\n      setTotalPages(calcTotalPages);\n      if (currentPage > calcTotalPages) setCurrentPage(1);\n    }\n  }, [countries, countriesXPage, currentPage]);\n\n  /////////////// COUNTRIES TOOLS : FILTER, SEARCH && ORDER : se podria modularizar !!!!!!\n  useEffect(() => {\n    dispatch(countriesTools(filter, searchText, order, allCountries));\n    pages(currentPage);\n  }, [order, filter, searchText, dispatch, currentPage]);// Si agrego allCountries entra en loop\n\n  // FILTER\n  const regionFilter = useRef();\n  const activityFilter = useRef();\n\n  function handleFilter(e) {\n    // Es un obj tipo { region:'Asia', activity:'Morder' }\n    setFilter({ ...filter, [e.target.name]: e.target.value });\n  }\n  function handleClearFilters() {\n    setFilter({});\n    regionFilter.current.value = '';\n    activityFilter.current.value = '';\n  }\n  // SEARCH\n  const inputSearch = useRef();\n\n  function handleResetButton(e) {\n    e.preventDefault();\n    setSearchText('');\n    inputSearch.current.value = '';\n  }\n  function handleSearchText(e) {\n    setSearchText(e.target.value);\n  }\n  // ORDER\n  function handleOrder(e) {\n    setOrder(e.target.id);\n  }\n\n  return (\n    <div id={style.container}>\n\n      <div className={style.countryTools}>\n        {/* SETTINGS  */}\n        <div className={style.settings}>\n          <div id={style.reload}>\n            <label>Reload</label>\n            <img src={reloadIco} value=\"Reload\" onClick={handleReloadDB} alt='reload' /> <br />\n          </div>\n          <div id={style.results}>\n            <label>Page results <span>{countriesXPage}</span></label>\n            <input type=\"range\" min='8' max='32' size='2' value={countriesXPage} onChange={(e) => setCountriesXPage(e.target.value)} />\n            <label>Total results <span>{countries.length}</span></label>\n          </div>\n        </div>\n\n        {/* PAGING  */}\n        <Paging\n          totalPages={totalPages}\n          currentPage={currentPage}\n          pages={pages}\n        />\n\n        {/* TOOLS */}\n        <div className={style.tools}>\n\n          {/* SELECT ORDER */}\n          <div id={style.sort} className={style.tool}>\n            <label>Sort</label>\n            <div>\n              <img src={sortAzIco} id=\"asc\" name=\"order\" value=\"ASC\" onClick={handleOrder}\n                className={order === 'asc' ? style.imgSelected : null} alt='Order:ascending'\n              />\n              <img src={sortZaIco} id=\"des\" name=\"order\" value=\"DES\" onClick={handleOrder}\n                className={order === 'des' ? style.imgSelected : null} alt='Order:descending'\n              />\n              <img src={sortPersonUpIco} id=\"popUp\" name=\"order\" value=\"PopUp\" onClick={handleOrder}\n                className={order === 'popUp' ? style.imgSelected : null} alt='Order:popoulation up'\n              />\n              <img src={sortPersonDwIco} id=\"popDown\" name=\"order\" value=\"PopDown\" onClick={handleOrder}\n                className={order === 'popDown' ? style.imgSelected : null} alt='Order:popoulation down'\n              />\n            </div>\n          </div>\n\n          {/* SEARCH TEXT */}\n          <div id={style.search} className={style.tool}>\n            <label>Search</label>\n            <div>\n              <input type=\"text\" size='15' id=\"searchText\" name=\"searchText\" onChange={handleSearchText} ref={inputSearch} />\n              <input type=\"button\" onClick={handleResetButton} value=\"X\" className={style.button}\n                style={searchText ? { visibility: 'visible' } : { visibility: 'hidden' }}\n              />\n            </div>\n          </div>\n\n          {/* SELECT FILTER */}\n          <div className={style.tool}>\n            <label>Filter</label>\n            <div id={style.filter}>\n              {/* Region */}\n              {/* MIRA https://www.geeksforgeeks.org/how-to-set-default-value-in-select-using-reactjs/ */}\n              <select name=\"region\" onChange={handleFilter} ref={regionFilter} defaultValue='By region'>\n                <option disabled>By region</option>\n                <option value=\"\">All regions</option>\n                {\n                  regionList && regionList.map((reg) => {\n                    return (<option value={reg} key={reg} >{reg}</option>);\n                  })}\n              </select>\n              {/* Activity  */}\n              <select name=\"activity\" onChange={handleFilter} ref={activityFilter} defaultValue='By activity'>\n                <option disabled>By activity</option>\n                <option value=\"\" >All activities</option>\n                {\n                  activitiesList && activitiesList.map((act) => {\n                    return (<option value={act} key={act} >{act}</option>);\n                  })}\n              </select>\n              <input type=\"button\" onClick={handleClearFilters} value=\"X\" className={style.button}\n                style={(filter.region || filter.activity) ? { visibility: 'visible' } : { visibility: 'hidden' }}\n              />\n            </div>\n          </div>\n\n        </div>\n      </div>\n\n      {/* ------------------------------------------------------------------------------------------- */}\n\n      {/* COUNTRY CARDS  */}\n      <div id={style.countries}>\n        {countries.length ?\n          (pageCountries.map((country) => {\n            return (\n              <CountryCard\n                key={country.id}\n                name={country.name}\n                region={country.region}\n                flag={country.flag}\n                flag_icon={country.flag_icon}\n                id={country.id}\n              />\n            );\n          }))\n          : (<div className={style.loader}></div>)}\n      </div>\n\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}